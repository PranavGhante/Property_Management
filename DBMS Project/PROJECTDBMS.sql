CREATE TABLE PROPERTY_OWNER
(
    OWNER_ID INT PRIMARY KEY,
    FIRST_NAME VARCHAR(20),
    LAST_NAME VARCHAR(20),
    PHONE_NO INT,
    ADDRESS VARCHAR(100)
);
DROP TABLE PROPERTY_OWNER;
CREATE TABLE AGENT
(
    AGENT_ID INT PRIMARY KEY,
    AGENT_NAME VARCHAR(50),
    PHONE_NO INT
);
DROP TABLE AGENT;
CREATE TABLE AGENT_EMAIL
(
    AGENT_ID INT,
    EMAIL VARCHAR(100),
    FOREIGN KEY(AGENT_ID) REFERENCES AGENT(AGENT_ID)
);
DROP TABLE AGENT_EMAIL;
CREATE TABLE ASSESSOR
(
    A_ID INT PRIMARY KEY,
    A_NAME VARCHAR(30),
    PHONE_NO INT,
    EMAIL VARCHAR(100),
    LICENSE_NO INT
);
DROP TABLE ASSESSOR
CREATE TABLE PROPERTY_INSPECTION_OFFICER
(
    PIO_ID INT PRIMARY KEY,
    PIO_NAME VARCHAR(50),
    PHONE_NO INT,
    LICENSE_NO INT
);
DROP TABLE PROPERTY_INSPECTION_OFFICER
CREATE TABLE CLIENT
(
    CLIENT_ID INT PRIMARY KEY,
    CLIENT_NAME VARCHAR(50),
    PREFERRED_LOCATION VARCHAR(100)
);
DROP TABLE CLIENT
CREATE TABLE BUYER
(
    CLIENT_ID INT,
    B_REQUIREMENT VARCHAR(100),
    BUDGET INT,
    FOREIGN KEY(CLIENT_ID) REFERENCES CLIENT(CLIENT_ID),
    CONSTRAINT PK_BUYER PRIMARY KEY(CLIENT_ID)
);
DROP TABLE BUYER
CREATE TABLE TENANT
(
    CLIENT_ID INT,
    RENT INT,
    T_REQUIREMENT VARCHAR(100),
    NUM_INMATES INT,
    FOREIGN KEY(CLIENT_ID) REFERENCES CLIENT(CLIENT_ID),
    CONSTRAINT PK_TENANT PRIMARY KEY(CLIENT_ID)
);
DROP TABLE TENANT
CREATE TABLE C_PHONE_NO
(
    CLIENT_ID INT,
    PHONE_NO INT,
    FOREIGN KEY(CLIENT_ID) REFERENCES CLIENT(CLIENT_ID)
);
DROP TABLE C_PHONE_NO
CREATE TABLE PROPERTY
(
    PROP_ID INT PRIMARY KEY,
    PROP_TYPE VARCHAR(20),
    STATUS VARCHAR(20),
    AREA INT,
    PRICE INT,
    BUY_RENT VARCHAR(20),
    OWNER_ID INT,
    AGENT_ID INT,
    PIN_CODE INT NOT NULL,
    FOREIGN KEY (OWNER_ID) REFERENCES PROPERTY_OWNER(OWNER_ID),
    FOREIGN KEY (AGENT_ID) REFERENCES AGENT(AGENT_ID)
);
DROP TABLE PROPERTY;
CREATE TABLE PROPERTY_LOCATION
(
    PIN_CODE INT,
    STATE VARCHAR(100),
    CITY VARCHAR(100),
    FOREIGN KEY (PIN_CODE) REFERENCES PROPERTY_LOCATION(PIN_CODE),
    CONSTRAINT PK_PL PRIMARY KEY(PIN_CODE)
);
DROP TABLE PROPERTY_LOCATION;
CREATE TABLE PROPERTY_SERVICES
(
    SERVICE_ID INT PRIMARY KEY,
    SERVICE_TYPE VARCHAR(20),
    SERVICE_DATE DATE,
    OWNER_ID INT,
    PROPERTY_ID INT,
    FOREIGN KEY (OWNER_ID) REFERENCES PROPERTY_OWNER(OWNER_ID),
    FOREIGN KEY (PROPERTY_ID) REFERENCES PROPERTY(PROP_ID)    
);
DROP TABLE PROPERTY_SERVICES
CREATE TABLE ASSESSOR_RESPONSE
(
    SERVICE_ID INT,
    A_ID INT,
    FOREIGN KEY (SERVICE_ID) REFERENCES PROPERTY_SERVICES(SERVICE_ID),
    FOREIGN KEY (A_ID) REFERENCES ASSESSOR(A_ID),
    CONSTRAINT PK_AR PRIMARY KEY(SERVICE_ID) 
);
DROP TABLE ASSESSOR_RESPONSE
CREATE TABLE PIO_RESPONSE
(
    SERVICE_ID INT,
    PIO_ID INT,
    FOREIGN KEY (SERVICE_ID) REFERENCES PROPERTY_SERVICES(SERVICE_ID),
    FOREIGN KEY (PIO_ID) REFERENCES PROPERTY_INSPECTION_OFFICER(PIO_ID),
    CONSTRAINT PK_PIOR PRIMARY KEY(SERVICE_ID) 
);
DROP TABLE PIO_RESPONSE
CREATE TABLE APPOINTMENT
(
    AP_ID INT PRIMARY KEY,
    AP_DATE DATE,
    CLIENT_ID INT,
    AGENT_ID INT,
    FOREIGN KEY(CLIENT_ID) REFERENCES CLIENT(CLIENT_ID),
    FOREIGN KEY (AGENT_ID) REFERENCES AGENT(AGENT_ID)    
);
DROP TABLE APPOINTMENT
CREATE TABLE CONTRACT
(
    C_ID INT PRIMARY KEY,
    C_DATE DATE,
    S_DATE DATE,
    E_DATE DATE,
    CONTRACT_VALUE INT,
    CLIENT_ID INT,
    AGENT_ID INT,
    FOREIGN KEY(CLIENT_ID) REFERENCES CLIENT(CLIENT_ID),
    FOREIGN KEY (AGENT_ID) REFERENCES AGENT(AGENT_ID)      
);
DROP TABLE CONTRACT
CREATE TABLE PROPERTY_IMAGE
(
    IMG_ID INT,
    PROP_ID INT,
    IMG_NAME VARCHAR(20),
    DESCP VARCHAR(100),
    FOREIGN KEY (PROP_ID) REFERENCES PROPERTY(PROP_ID),
    CONSTRAINT PK_PROPERTY_IMAGE PRIMARY KEY(IMG_ID,PROP_ID)
);
DROP TABLE PROPERTY_IMAGE


INSERT INTO PROPERTY_INSPECTION_OFFICER VALUES(3001,'THANEDAR',67890123458,1111772);
INSERT INTO PROPERTY_INSPECTION_OFFICER VALUES(3002,'AMIT',6789012773,1111896);
INSERT INTO PROPERTY_INSPECTION_OFFICER VALUES(3003,'SAGAR',88890123458,111772);
INSERT INTO PROPERTY_INSPECTION_OFFICER VALUES(3004,'ARJUN',98890123458,1111772);

INSERT INTO ASSESSOR VALUES(3501,'RANA PRATAP',7786779900,'RP@GMAIL.COM',22461);
INSERT INTO ASSESSOR VALUES(3502,'AMRESH',7786779900,'AM@GMAIL.COM',22572);
INSERT INTO ASSESSOR VALUES(3503,'SHUBAM',8786779900,'SH@GMAIL.COM',22811);
INSERT INTO ASSESSOR VALUES(3504,'GAUTAM',9786779900,'GA@GMAIL.COM',22922);

INSERT INTO ASSESSOR_RESPONSE VALUES(4001,3501);
INSERT INTO ASSESSOR_RESPONSE VALUES(4003,3501);
INSERT INTO ASSESSOR_RESPONSE VALUES(4004,3502);
INSERT INTO ASSESSOR_RESPONSE VALUES(4006,3504);

INSERT INTO PIO_RESPONSE VALUES(4002,3002);
INSERT INTO PIO_RESPONSE VALUES(4005,3003);
INSERT INTO PIO_RESPONSE VALUES(4007,3002);
INSERT INTO PIO_RESPONSE VALUES(4008,3004);

INSERT INTO PROPERTY_SERVICES VALUES(4001,'ASSESS','28-APR-20',7001,1001);
INSERT INTO PROPERTY_SERVICES VALUES(4002,'INSPECT','02-MAY-20',7001,1002);
INSERT INTO PROPERTY_SERVICES VALUES(4003,'ASSESS','23-MAY-20',7001,1005);
INSERT INTO PROPERTY_SERVICES VALUES(4004,'ASSESS','11-MAR-20',7001,1003);
INSERT INTO PROPERTY_SERVICES VALUES(4005,'INSPECT','08-MAY-20',7001,1001);
INSERT INTO PROPERTY_SERVICES VALUES(4006,'ASSESS','24-APR-20',7001,1002);
INSERT INTO PROPERTY_SERVICES VALUES(4007,'INSPECT','18-MAY-20',7001,1007);
INSERT INTO PROPERTY_SERVICES VALUES(4008,'INSPECT','29-MAR-20',7001,1008);

INSERT INTO PROPERTY_IMAGE VALUES(9001,1001,'I1.PNG','FRONT VIEW');
INSERT INTO PROPERTY_IMAGE VALUES(9002,1002,'I2.PNG','SIDE VIEW');
INSERT INTO PROPERTY_IMAGE VALUES(9003,1001,'I3.PNG','BACK VIEW');
INSERT INTO PROPERTY_IMAGE VALUES(9004,1003,'I4.PNG','SIDE VIEW');
INSERT INTO PROPERTY_IMAGE VALUES(9005,1004,'I5.PNG','FRONT VIEW');
INSERT INTO PROPERTY_IMAGE VALUES(9006,1005,'I6.PNG','SIDE VIEW');

INSERT INTO AGENT_EMAIL VALUES(8001,'PRAKASH123@GMAIL.COM');
INSERT INTO AGENT_EMAIL VALUES(8001,'PRAKASH486@GMAIL.COM');
INSERT INTO AGENT_EMAIL VALUES(8002,'SAHAY193@GMAIL.COM');
INSERT INTO AGENT_EMAIL VALUES(8003,'RISHI113@GMAIL.COM');
INSERT INTO AGENT_EMAIL VALUES(8003,'RISHU23@GMAIL.COM');
INSERT INTO AGENT_EMAIL VALUES(8004,'AGASTYA_123@GMAIL.COM');

INSERT INTO CONTRACT VALUES(6001,'02-MAY-20',NULL,NULL,20000000,2001,8001);
INSERT INTO CONTRACT VALUES(6002,'04-SEP-21',NULL,NULL,5000000,2002,8001);
INSERT INTO CONTRACT VALUES(6003,'12-AUG-22',NULL,NULL,8000000,2004,8002);
INSERT INTO CONTRACT VALUES(6004,'05-JUL-21','24-JUL-21','21-JUL-24',35000,2007,8003);
INSERT INTO CONTRACT VALUES(6005,'19-FEB-20','01-MAR-20','04-MAR-24',200000,2009,8004);
INSERT INTO CONTRACT VALUES(6006,'21-JAN-22','01-FEB-22','16-SEP-26',600000,2010,8004);

DELETE FROM CONTRACT;
INSERT INTO APPOINTMENT VALUES(5001,'16-MAR-2020',2001,8001);
INSERT INTO APPOINTMENT VALUES(5002,'22-AUG-2020',2002,8001);
INSERT INTO APPOINTMENT VALUES(5003,'31-JUL-2022',2004,8002);
INSERT INTO APPOINTMENT VALUES(5004,'01-JUN-2021',2007,8003);
INSERT INTO APPOINTMENT VALUES(5005,'10-FEB-2020',2009,8004);
INSERT INTO APPOINTMENT VALUES(5006,'10-JAN-2022',2010,8004);

INSERT INTO PROPERTY_OWNER VALUES(7001,'PRANAV','GHANTE',9822934039,'GM ROAD PUNE');
INSERT INTO PROPERTY_OWNER VALUES(7002,'ISHAN','GUPTA',7722934039,'HK STREET WARANGAL');
INSERT INTO PROPERTY_OWNER VALUES(7003,'ARYAN','SINGH',9856934039,'HITECH CITY HYDERABAD');
INSERT INTO PROPERTY_OWNER VALUES(7004,'OM','KADAM',9822956739,'FORT MUMBAI');
INSERT INTO PROPERTY_OWNER VALUES(7005,'ADHIRAJ','PATEL',6782934039,'GM ROAD DELHI');
INSERT INTO PROPERTY_OWNER VALUES(7006,'AASHISH','RAMPAL',9567934039,'BANDRA MUMBAI');

INSERT INTO C_PHONE_NO VALUES(2001, 7495801192);
INSERT INTO C_PHONE_NO VALUES(2001, 7498611258);
INSERT INTO C_PHONE_NO VALUES(2002, 8488615995);
INSERT INTO C_PHONE_NO VALUES(2003, 9199940159);
INSERT INTO C_PHONE_NO VALUES(2004, 8655211596);
INSERT INTO C_PHONE_NO VALUES(2005, 6418611959);
INSERT INTO C_PHONE_NO VALUES(2005, 7477710001);
INSERT INTO C_PHONE_NO VALUES(2006, 8166652194);
INSERT INTO C_PHONE_NO VALUES(2007, 7915620118);
INSERT INTO C_PHONE_NO VALUES(2008, 8611940216);
INSERT INTO C_PHONE_NO VALUES(2009, 9495064364);
INSERT INTO C_PHONE_NO VALUES(2009, 9933810506);
INSERT INTO C_PHONE_NO VALUES(2010, 7895463222);

INSERT INTO BUYER VALUES(2001, 'Industrial', 70000000);
INSERT INTO BUYER VALUES(2002, 'Commercial', 20000000);
INSERT INTO BUYER VALUES(2003, 'Residential',50000000);
INSERT INTO BUYER VALUES(2004, 'Commercial', 15000000);
INSERT INTO BUYER VALUES(2005, 'Residential',6500000);

INSERT INTO TENANT VALUES(2006, 200000, 'Commercial', NULL);
INSERT INTO TENANT VALUES(2007, 40000, 'Residential', 4);
INSERT INTO TENANT VALUES(2008, 80000, 'Residential', 1);
INSERT INTO TENANT VALUES(2009, 350000, 'Commercial', NULL);
INSERT INTO TENANT VALUES(2010, 100000, 'Residential', 2);

INSERT INTO AGENT VALUES(8001, 'Prakash', 8488619921);
INSERT INTO AGENT VALUES(8002, 'Sahay', 9999911111);
INSERT INTO AGENT VALUES(8003, 'Rishabh', 6869485594);
INSERT INTO AGENT VALUES(8004, 'Agastya', 7411978223);

INSERT INTO PROPERTY VALUES(1001, 'Commercial', 'NOT AVAILABLE', 14000, 100000000, 'FOR SALE', 7001, 8002, 403001);
INSERT INTO PROPERTY VALUES(1002, 'Industrial', 'AVAILABLE', 130000, 70000000, 'FOR SALE', 7001, 8004, 474002);
INSERT INTO PROPERTY VALUES(1003, 'Residential(1 BHK)', 'NOT AVAILABLE', 800,  15000000, 'ON RENT', 7003, 8001, 206002);
INSERT INTO PROPERTY VALUES(1004, 'Residential(3 BHK)', 'NOT AVAILABLE', 1000, 80000, 'ON RENT', 7005, 8002, 250001);
INSERT INTO PROPERTY VALUES(1005, 'Commercial', 'AVAILABLE', 15000, 120000000, 'FOR SALE', 7004, 8003, 400001);
INSERT INTO PROPERTY VALUES(1006, 'Industrial', 'NOT AVAILABLE', 150000, 100000000, 'FOR SALE', 7006, 8003, 300018);
INSERT INTO PROPERTY VALUES(1007, 'Residential(Villa)', 'NOT AVAILABLE', 1600, 10000000, 'FOR SALE', 7006, 8003, 500001);
INSERT INTO PROPERTY VALUES(1008, 'Commercial', 'NOT AVAILABLE', 17000, 9000000, 'ON RENT', 7002, 8003, 506001);
INSERT INTO PROPERTY VALUES(1009, 'Residential', 'AVAILABLE', 1200, 5000000, 'ON RENT', 7002, 8001, 700001);
INSERT INTO PROPERTY VALUES(1010, 'Commercial', 'AVAILABLE', 22000, 150000000, 'FOR SALE', 7003, 8003, 248001);
INSERT INTO PROPERTY VALUES(1011, 'Residential', 'AVAILABLE', 1700, 8500000, 'FOR SALE', 7005, 8004, 400001);
INSERT INTO PROPERTY VALUES(1012, 'Residential', 'AVAILABLE', 2200, 25000, 'ON RENT', 7006, 8001, 500001);

INSERT INTO PROPERTY_LOCATION VALUES(403001, 'Goa', 'Panji');
INSERT INTO PROPERTY_LOCATION VALUES(474002, 'Madhya Pradesh', 'Gwalior');
INSERT INTO PROPERTY_LOCATION VALUES(206002, 'Uttar Pradesh', 'Etawah');
INSERT INTO PROPERTY_LOCATION VALUES(250001, 'Uttar Pradesh', 'Meerut');
INSERT INTO PROPERTY_LOCATION VALUES(400001, 'Maharashtra', 'Mumbai');
INSERT INTO PROPERTY_LOCATION VALUES(30018, 'Gujarat', 'Vadodara');
INSERT INTO PROPERTY_LOCATION VALUES(500001, 'Telangana', 'Hyderabad');
INSERT INTO PROPERTY_LOCATION VALUES(506001, 'Telangana', 'Warangal');
INSERT INTO PROPERTY_LOCATION VALUES(700001, 'West Bengal', 'Kolkata');
INSERT INTO PROPERTY_LOCATION VALUES(248001, 'Uttarakhand', 'Dehradun');

INSERT INTO CLIENT VALUES(2001, 'Ishaan' , 'Mumbai');
INSERT INTO CLIENT VALUES(2002, 'Mahesh' , 'Gwalior');
INSERT INTO CLIENT VALUES(2003, 'Kunal' , 'Kolkata');
INSERT INTO CLIENT VALUES(2004, 'Aman' , 'Etawah');
INSERT INTO CLIENT VALUES(2005, 'Mohit' , 'Vadodara');
INSERT INTO CLIENT VALUES(2006, 'Sanket' , 'Mumbai');
INSERT INTO CLIENT VALUES(2007, 'Dibya' , 'Hyderabad');
INSERT INTO CLIENT VALUES(2008, 'Steve' , 'Warangal');
INSERT INTO CLIENT VALUES(2009, 'Bhavana' , 'Delhi');
INSERT INTO CLIENT VALUES(2010, 'Aakanksha', 'Panji');

SELECT * FROM CLIENT;
SELECT * FROM PROPERTY;
SELECT * FROM PROPERTY_LOCATION;
SELECT * FROM PROPERTY_IMAGE;
SELECT * FROM AGENT;
SELECT * FROM AGENT_EMAIL;
SELECT * FROM BUYER;
SELECT * FROM TENANT;
SELECT * FROM C_PHONE_NO;
SELECT * FROM PROPERTY_INSPECTION_OFFICER;
SELECT * FROM ASSESSOR;
SELECT * FROM ASSESSOR_RESPONSE;
SELECT * FROM PIO_RESPONSE;
SELECT * FROM PROPERTY_SERVICES;
SELECT * FROM APPOINTMENT;
SELECT * FROM CONTRACT;
delete from contract;
SELECT * FROM PROPERTY_OWNER;
CREATE OR REPLACE TRIGGER PROPERRTY_TRIGGER
BEFORE INSERT OR UPDATE OR DELETE ON PROPERTY
FOR EACH ROW
ENABLE
BEGIN
    IF INSERTING THEN
        DBMS_OUTPUT.PUT_LINE('THE DATA INSERTED IS AVAILABLE FOR '||:NEW.BUY_RENT);
    ELSIF UPDATING THEN
        DBMS_OUTPUT.PUT_LINE('THE STATUS IS  UPDATED FROM '||:OLD.STATUS||' TO '||:NEW.STATUS);
    ELSIF DELETING THEN
        DBMS_OUTPUT.PUT_LINE('THE PROPERTY '||:NEW.PROP_ID||' IS DELETED');
    END IF;
END;


SELECT * FROM PROPERTY
WHERE STATUS='AVAILABLE';

SELECT P.PROP_ID,P.PROP_TYPE,P.STATUS 
FROM PROPERTY P
JOIN PROPERTY_LOCATION PL 
ON P.PIN_CODE=PL.PIN_CODE
WHERE PL.CITY='Mumbai'; 

SELECT * FROM CONTRACT
ORDER BY CONTRACT_VALUE; 

SELECT C.CLIENT_NAME
FROM CLIENT C
JOIN BUYER B
ON C.CLIENT_ID=B.CLIENT_ID
WHERE B.B_REQUIREMENT='Industrial';